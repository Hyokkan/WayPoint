<!DOCTYPE html>
<html>
  <head>
    <title>Map</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <link href="./map.css">
    <script src="https://maps.google.com/maps/api/js?libraries=placeses,visualization,drawing,geometry,places"></script>
    <script src="https://code.angularjs.org/1.3.15/angular.js"></script>
    <script src="https://rawgit.com/allenhwkim/angularjs-google-maps/master/build/scripts/ng-map.js"></script>
    <script>
      angular.module('ngMap').run(function($rootScope, NgMap) {
        NgMap.getMap().then(function(map) {
          $rootScope.map = map;
        });
      }).controller('FormController',['$scope', function($scope) {
        $scope.startPt = "";
        $scope.endPt = "";

        $scope.updateMap = function() {
          var map = angular.element(document.querySelector('#map'));
          map.attr({
            origin: "startPt",
            destination: "endPt"
          });
          console.log(startPt);
        };
      }]);
    </script>
  </head>
  <body ng-app="ngMap">
    <form name="mapForm" ng-controller="FormController">
      Start: <input name="start" ng-model="startPt" required>
      End: <input name="end" ng-model="endPt" required>
      <span class='error' ng-show="mapForm.input.$error.required">Please fill in the inputs</span>
      <br>
      <p>We are starting from {{startPt}}</p>
      <p>We are ending at {{endPt}}</p>
      <button ng-click='updateMap()'>See directions</button>
    </form>
    <br>
    <div style="width: 68%; float:left; height: 100%">

      <ng-map class="map" zoom="14"
        style="height:90%" >
        <directions
          draggable="true"
          panel="directions-panel"
          travel-mode="DRIVING"
          origin="vancouver"
          destination="toronto">
        </directions>
      </ng-map>
    </div>

    <div id="directions-panel" style="width: 28%; float:left; height: 100%; overflow: auto; padding: 0px 5px">
    </div>
  </body>
</html>
